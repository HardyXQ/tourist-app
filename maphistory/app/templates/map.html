<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –ú–∏–Ω—Å–∫–∞</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- Load static files -->
    {% load static %}

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        #map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .location-popup {
            max-width: 300px;
        }

        .location-popup img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .location-popup h5 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .location-popup p {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .location-popup .address {
            font-size: 12px;
            color: #95a5a6;
            margin-bottom: 15px;
        }

        /* –°–ò–ù–Ø–Ø –ö–ù–û–ü–ö–ê –ë–ï–ó –ì–†–ê–î–ò–ï–ù–¢–ê - –¢–ï–ö–°–¢ –í–°–ï–ì–î–ê –ë–ï–õ–´–ô */
        .btn-details {
            background: #007bff;
            border: none;
            color: white !important; /* –í—Å–µ–≥–¥–∞ –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            width: 100%;
            text-decoration: none;
            display: block;
            text-align: center;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-details:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 123, 255, 0.4);
            color: white !important; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        /* –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255,255,255,0.95);
            border: 2px solid #e9ecef;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .back-btn:hover {
            background: white;
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .theme-toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255,255,255,0.95);
            border: 2px solid #e9ecef;
            border-radius: 25px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: 500;
            border: none;
        }

        .theme-toggle-btn:hover {
            background: white;
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        /* –¶–ò–§–†–û–í–´–ï –ú–ê–†–ö–ï–†–´ - –£–í–ï–õ–ò–ß–ï–ù–´ –î–õ–Ø –ü–ö */
        .number-marker {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            border: 3px solid white;
            border-radius: 50%;
            width: 40px; /* –£–≤–µ–ª–∏—á–∏–ª –¥–ª—è –ü–ö */
            height: 40px; /* –£–≤–µ–ª–∏—á–∏–ª –¥–ª—è –ü–ö */
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 16px; /* –£–≤–µ–ª–∏—á–∏–ª —à—Ä–∏—Ñ—Ç */
            transition: all 0.3s ease;
        }

        .number-marker:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        /* –°–ö–†–´–í–ê–ï–ú –ö–ù–û–ü–ö–ò ZOOMA –ò –ê–¢–¢–†–ò–ë–£–¶–ò–Æ */
        .leaflet-control-zoom {
            display: none !important;
        }

        .leaflet-control-attribution {
            display: none !important;
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø POPUP –í –õ–ï–ì–ö–û–ô –¢–ï–ú–ï */
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            background: white;
            color: #2c3e50;
        }

        .leaflet-popup-tip {
            background: white;
            box-shadow: none;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê */
        @media (max-width: 768px) {
            .back-btn {
                top: 10px;
                left: 10px;
                width: 45px;
                height: 45px;
            }

            .theme-toggle-btn {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 14px;
            }

            .location-popup {
                max-width: 280px;
            }

            .btn-details {
                padding: 12px 20px;
                font-size: 13px;
            }

            /* –£–ú–ï–ù–¨–®–ê–ï–ú –ú–ê–†–ö–ï–†–´ –ù–ê –¢–ï–õ–ï–§–û–ù–ï */
            .number-marker {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .back-btn {
                width: 40px;
                height: 40px;
            }

            .theme-toggle-btn {
                padding: 6px 10px;
                font-size: 12px;
            }

            .theme-toggle-btn span {
                display: none;
            }
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
        [data-bs-theme="dark"] .back-btn,
        [data-bs-theme="dark"] .theme-toggle-btn {
            background: rgba(45, 55, 72, 0.95);
            border-color: #4a5568;
            color: white;
        }

        [data-bs-theme="dark"] .back-btn:hover,
        [data-bs-theme="dark"] .theme-toggle-btn:hover {
            background: #2d3748;
        }

        /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –≤ –∫–Ω–æ–ø–∫–µ –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
        [data-bs-theme="dark"] .btn-details {
            color: white !important;
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø POPUP –í –¢–ï–ú–ù–û–ô –¢–ï–ú–ï */
        [data-bs-theme="dark"] .leaflet-popup-content-wrapper {
            background: #2d3748;
            color: #e2e8f0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        [data-bs-theme="dark"] .leaflet-popup-tip {
            background: #2d3748;
        }

        [data-bs-theme="dark"] .location-popup h5 {
            color: #f7fafc;
        }

        [data-bs-theme="dark"] .location-popup p {
            color: #cbd5e0;
        }

        [data-bs-theme="dark"] .location-popup .address {
            color: #a0aec0;
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤ */
        [data-bs-theme="dark"] .number-marker {
            border-color: #2d3748;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
    <button class="back-btn" onclick="window.location.href='/'">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
        </svg>
    </button>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–º–µ–Ω—ã —Ç–µ–º—ã -->
    <button class="theme-toggle-btn" id="themeToggle">
        <svg width="16" height="16" fill="currentColor" class="theme-icon">
            <use href="#sun-fill"></use>
        </svg>
        <span>–¢–µ–º–∞</span>
    </button>

    <!-- –ö–∞—Ä—Ç–∞ -->
    <div id="map"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <!-- SVG –∏–∫–æ–Ω–∫–∏ -->
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="sun-fill" viewBox="0 0 16 16">
            <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="moon-stars-fill" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.348 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
    </svg>

    <script>
        // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing map...');

            // –í–°–ï –¢–û–ß–ö–ò –° –ù–£–ú–ï–†–ê–¶–ò–ï–ô 2,3,4,5,7,8,9
            const locations = [
                {
                    id: 1,
                    number: 1,
                    title: "–ü—Ä–∏–∑—Ä–∞–∫ –Ω–∞ –ó—ã–±–∏—Ü–∫–æ–π",
                    short_description: "–í XIX –≤–µ–∫–µ –ø–æ —É–ª–∏—Ü–µ –ó—ã–±–∏—Ü–∫–æ–π –∂–∏–ª –∫—É–ø–µ—Ü –±—ã–ª–∏ –¥–≤–µ —Ä–æ–¥–Ω—ã–µ –¥–æ—á–µ—Ä–∏ –∏ –æ–¥–Ω–∞ –ø—Ä–∏–µ–º–Ω–∞—è...",
                    lat: 53.905578,
                    lng: 27.559352,
                    address: "—É–ª. –ó—ã–±–∏—Ü–∫–∞—è, 9, –ú–∏–Ω—Å–∫",
                    image: "{% static 'images/locations/ylica.jpg' %}"
                },
                {
                    id: 2,
                    number: 2,
                    title: "–ü—Ä–∏–∑—Ä–∞–∫ –ú–∏–Ω—Å–∫–æ–π –†–∞—Ç—É—à–∏",
                    short_description: "–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–∑—Ä–∞–∫–∞ –ú–∏–Ω—Å–∫–æ–π –†–∞—Ç—É—à–∏ –±–µ—Ä–µ—Ç –Ω–∞—á–∞–ª–æ –≤ XVIII –≤–µ–∫–µ, –∫–æ–≥–¥–∞ –∂–∏–ª –Ω–∞ —Å–≤–µ—Ç–µ –∑–∞–¥–∏—Ä–∞, –ø—å—è–Ω–∏—Ü–∞ –∏ –¥–µ–±–æ—à–∏—Ä...",
                    lat: 53.903577,
                    lng: 27.556140,
                    address: "–ú–∏–Ω—Å–∫, –ø–ª–æ—â–∞–¥—å –°–≤–æ–±–æ–¥—ã, 2–ê",
                    image: "{% static 'images/locations/ratusha.jpg' %}"
                },
                {
                    id: 3,
                    number: 3,
                    title: "–ü—Ä–∏–∑—Ä–∞–∫ –ö–∞–ª—å–≤–∞—Ä–∏–π—Å–∫–æ–≥–æ –∫–ª–∞–¥–±–∏—â–∞",
                    short_description: "–ó–¥–µ—Å—å –≤ –æ–¥–∏–Ω –∏–∑ –¥–Ω–µ–π, –ø–æ—Ö–æ—Ä–æ–Ω–∏–ª–∏ —É–º–µ—Ä—à—É—é –æ—Ç —Ç—è–∂–µ–ª–æ–π –±–æ–ª–µ–∑–Ω–∏ –º–æ–ª–æ–¥—É—é –ø–∞–Ω–µ–Ω–∫—É...",
                    lat: 53.907947,
                    lng: 27.504365,
                    address: "–ú–∏–Ω—Å–∫, –ö–∞–ª—å–≤–∞—Ä–∏–π—Å–∫–æ–µ –ö–ª–∞–¥–±–∏—â–µ",
                    image: "{% static 'images/locations/calvary.jpg' %}"
                },
                {
                    id: 4,
                    number: 4,
                    title: "–ü—Ä–∏–∑—Ä–∞–∫ –õ–æ—à–∏—Ü–∫–æ–≥–æ –ø–∞—Ä–∫–∞",
                    short_description: "–°–∞–º—ã–º –∏–∑–≤–µ—Å—Ç–Ω—ã–º –ø—Ä–∏–∑—Ä–∞–∫–æ–º, –æ–±–∏—Ç–∞—é—â–∏–º –≤ –Ω–∞—à–µ–π —Å—Ç–æ–ª–∏—Ü–µ, —Å—Ç–∞–ª–æ –ø—Ä–∏–≤–∏–¥–µ–Ω–∏–µ –Ø–¥–≤–∏–≥–∏ –õ—é–±–∞–Ω—Å–∫–æ–π...",
                    lat: 53.855533,
                    lng: 27.579974,
                    address: "–õ–æ—à–∏—Ü–∫–∏–π —É—Å–∞–¥–µ–±–Ω–æ-–ø–∞—Ä–∫–æ–≤—ã–π –∫–æ–º–ø–ª–µ–∫—Å, –ú–∏–Ω—Å–∫",
                    image: "{% static 'images/locations/loshitsa.jpg' %}"
                },
                {
                    id: 5,
                    number: 5,
                    title: "–ü—Ä–∏–∑—Ä–∞–∫ –æ–∫–æ–ª–æ –ú–∏—Ö–∞–π–ª–æ–≤—Å–∫–æ–≥–æ —Å–∫–≤–µ—Ä–∞",
                    short_description: "–ü–∞—Ä–∫ –∏–∑–≤–µ—Å—Ç–µ–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –≤ –Ω—ë–º —Å–∫—É–ª—å–ø—Ç—É—Ä–Ω—ã–º –≥—Ä—É–ø–ø–∞–º...",
                    lat: 53.894536,
                    lng: 27.551371,
                    address: "–ú–∏–Ω—Å–∫, –ú–∏—Ö–∞–π–ª–æ–≤—Å–∫–∏–π —Å–∫–≤–µ—Ä",
                    image: "{% static 'images/locations/mikhailovsky.jpg' %}"
                },
                {
                    id: 6,
                    number: 6,
                    title: "–î—É–±-–≤–µ–ª–∏–∫–∞–Ω –Ω–∞ –ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–æ–π",
                    short_description: " –£ –ø–æ–¥–Ω–æ–∂–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑ —Ö–æ–ª–º–æ–≤ –Ω–∞ —É–ª–∏—Ü–µ –ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–æ–π –ª–µ–∂–∞–ª –≤–∞–ª—É–Ω...",
                    lat: 53.896262,
                    lng: 27.573356,
                    address: "–ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–∞—è —É–ª–∏—Ü–∞, –ú–∏–Ω—Å–∫",
                    image: "{% static 'images/locations/Dyb.jpg' %}"
                },
                {
                    id: 7,
                    number: 7,
                    title: "–†—É—Å–∞–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ –Ø–Ω–∫–∏ –ö—É–ø–∞–ª—ã",
                    short_description: "–ï—Å–ª–∏ –ø—Ä–æ–π—Ç–∏—Å—å –≤–¥–æ–ª—å –ø–æ –ø—Ä–æ—Å–ø–µ–∫—Ç—É –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –º—ã –≤–æ–π–¥–µ–º –≤ –ø–∞—Ä–∫ –∏–º–µ–Ω–∏ –Ø–Ω–∫–∏ –ö—É–ø–∞–ª—ã...",
                    lat: 53.906670,
                    lng: 27.567072,
                    address: "–ú–∏–Ω—Å–∫, –ü–∞—Ä–∫ –∏–º–µ–Ω–∏ –Ø–Ω–∫–∏ –ö—É–ø–∞–ª—ã",
                    image: "{% static 'images/locations/kupala.jpg' %}"
                },
                {
                    id: 8,
                    number: 8,
                    title: "–†–µ–ª–∏–∫–≤–∏—è –≤ –ö–∞—Ñ–µ–¥—Ä–∞–ª—å–Ω–æ–º —Å–æ–±–æ—Ä–µ",
                    short_description: "–ó–¥–µ—Å—å –µ—Å—Ç—å —Ü–µ–ª—ã–π —Ä—è–¥ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–∫–æ–Ω –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–π —à–∫–æ–ª—ã...",
                    lat: 53.905096,
                    lng: 27.556253,
                    address: "–ú–∏–Ω—Å–∫, —É–ª. –ö–∏—Ä–∏–ª–ª–∞ –∏ –ú–µ—Ñ–æ–¥–∏—è, 3",
                    image: "{% static 'images/locations/cathedral.jpg' %}"
                },
                {
                    id: 9,
                    number: 9,
                    title: "–ú–∏–Ω—Å–∫–∏–π –∫—Ä–æ–∫–æ–¥–∏–ª",
                    short_description: "–ò–º–µ–Ω–Ω–æ –∑–∞ –î–≤–æ—Ä—Ü–æ–º –°–ø–æ—Ä—Ç–∞ —Ä–∞–Ω—å—à–µ –≤–æ–¥–∏–ª–∏—Å—å –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤ –∫—Ä—É–ø–Ω—ã–µ...",
                    lat: 53.910709,
                    lng: 27.549776,
                    address: "–ú–∏–Ω—Å–∫, –ü—Ä–æ—Å–ø–µ–∫—Ç –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π, 4",
                    image: "{% static 'images/locations/crocodile.jpg' %}"
                }
            ];

            console.log('Locations data:', locations);

            // –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô –¶–ï–ù–¢–† –ú–ò–ù–°–ö–ê - –ü–õ–û–©–ê–î–¨ –ù–ï–ó–ê–í–ò–°–ò–ú–û–°–¢–ò
            const minskCenter = [53.901677, 27.558521]; // –¶–µ–Ω—Ç—Ä –ú–∏–Ω—Å–∫–∞
            const isMobile = window.innerWidth <= 768;
            const optimalZoom = isMobile ? 13 : 12.5;

            console.log('Minsk center:', minskCenter, 'Zoom:', optimalZoom, 'Mobile:', isMobile);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏
            const map = L.map('map', {
                zoomControl: false,
                attributionControl: false,
                center: minskCenter,
                zoom: optimalZoom,
                zoomSnap: 0.1,
                zoomDelta: 0.5
            });

            console.log('Map initialized');

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤ –∫–∞—Ä—Ç—ã
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: false,
                maxZoom: 18,
                minZoom: 10
            }).addTo(map);

            console.log('Tile layer added');

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤ —Å –¶–ò–§–†–ê–ú–ò 2,3,4,5,7,8,9
            locations.forEach((location, index) => {
                console.log('Adding marker for:', location.title);

                const customIcon = L.divIcon({
                    className: 'number-marker',
                    html: `<div>${location.number}</div>`,
                    iconSize: [40, 40],
                    iconAnchor: [20, 20],
                    popupAnchor: [0, -20]
                });

                const marker = L.marker([location.lat, location.lng], {
                    icon: customIcon
                }).addTo(map);

                const popupContent = `
                    <div class="location-popup">
                        <img src="${location.image}" alt="${location.title}"
                             onerror="this.src='https://via.placeholder.com/300x150/667eea/white?text=–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ'">
                        <h5>${location.title}</h5>
                        <p>${location.short_description}</p>
                        <div class="address">üìç ${location.address}</div>
                        <a href="/location/${location.id}/" class="btn-details">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </a>
                    </div>
                `;

                marker.bindPopup(popupContent);
            });

            console.log('All markers added');

            // –£–ü–†–ê–í–õ–ï–ù–ò–ï –¢–ï–ú–û–ô
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('.theme-icon use');

            function setTheme(theme) {
                document.documentElement.setAttribute('data-bs-theme', theme);
                localStorage.setItem('theme', theme);

                if (theme === 'light') {
                    themeIcon.setAttribute('href', '#sun-fill');
                } else {
                    themeIcon.setAttribute('href', '#moon-stars-fill');
                }
            }

            function getPreferredTheme() {
                return localStorage.getItem('theme') || 'light';
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
            setTheme(getPreferredTheme());

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-bs-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                setTheme(newTheme);
            });

            // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û–ì–û –¶–ï–ù–¢–†–ò–†–û–í–ê–ù–ò–Ø –ö–ê–†–¢–´
            function ensureMapCentered() {
                console.log('Ensuring map is centered on Minsk...');

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã
                map.invalidateSize();

                // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–µ–Ω—Ç—Ä –∏ –∑—É–º
                map.setView(minskCenter, optimalZoom, {
                    animate: false,
                    duration: 0
                });

                console.log('Map center forced to:', map.getCenter());
            }

            // –û–ë–†–ê–ë–û–¢–ß–ò–ö –î–õ–Ø –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ò –ö–ê–†–¢–´ –ü–†–ò –ò–ó–ú–ï–ù–ï–ù–ò–ò –†–ê–ó–ú–ï–†–ê
            window.addEventListener('resize', function() {
                setTimeout(() => {
                    ensureMapCentered();
                }, 100);
            });

            // –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú –¶–ï–ù–¢–†–ò–†–û–í–ê–ù–ò–ï –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–π–º–µ—Ä–æ–≤ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
            setTimeout(ensureMapCentered, 100);
            setTimeout(ensureMapCentered, 500);
            setTimeout(ensureMapCentered, 1000);
            setTimeout(ensureMapCentered, 2000);

            // –¢–∞–∫–∂–µ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–æ–≥–¥–∞ –∫–∞—Ä—Ç–∞ –≥–æ—Ç–æ–≤–∞
            map.whenReady(function() {
                console.log('Map ready, centering...');
                ensureMapCentered();
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–æ–±—ã—Ç–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç—ã
            map.on('load', function() {
                console.log('Map loaded event, centering...');
                ensureMapCentered();
            });

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –∫–∞—Ä—Ç–∞ —Å–º–µ—Å—Ç–∏–ª–∞—Å—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ —Ü–µ–Ω—Ç—Ä
            let centerFixAttempts = 0;
            const maxCenterFixAttempts = 5;

            map.on('moveend', function() {
                const currentCenter = map.getCenter();
                const distance = map.distance(currentCenter, minskCenter);

                // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ —Å–º–µ—Å—Ç–∏–ª–∞—Å—å –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 1 –∫–º –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –ú–∏–Ω—Å–∫–∞
                if (distance > 1000 && centerFixAttempts < maxCenterFixAttempts) {
                    console.log('Map moved away from center, fixing... Distance:', Math.round(distance), 'meters');
                    ensureMapCentered();
                    centerFixAttempts++;
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
            window.addEventListener('error', function(e) {
                console.error('Global error:', e.error);
            });
        });
    </script>
</body>
</html>